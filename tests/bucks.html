
<script>
  let timeSpentOnPage = localStorage.getItem('timeSpent') ? parseInt(localStorage.getItem('timeSpent'), 10) : 0;
let interval;

document.addEventListener('visibilitychange', function() {
  if (document.visibilityState === 'visible') {
    interval = setInterval(() => {
      timeSpentOnPage++;
      localStorage.setItem('timeSpent', timeSpentOnPage.toString());
    }, 10);
  } else {
    clearInterval(interval);
  }
});

window.addEventListener('beforeunload', function() {
  clearInterval(interval);
  const minutes = Math.floor(timeSpentOnPage / 60);
  const finalValue = Math.floor(minutes / 3);
  localStorage.setItem('finalValue', finalValue.toString());
  localStorage.setItem('minutes', minutes.toString());
  localStorage.setItem('timeSpentOnPage', timeSpentOnPage.toString());
});

window.addEventListener('load', function() {
  const savedFinalValue = localStorage.getItem('finalValue');
  const savedFinalValue2 = localStorage.getItem('minutes');
  const savedFinalValue3 = localStorage.getItem('timeSpentOnPage');
  if (savedFinalValue) {
    const pElement = document.createElement('p');
    pElement.textContent = `Last session time: ${savedFinalValue}:${savedFinalValue2}:${savedFinalValue3} units`;
    document.body.appendChild(pElement);
  }
});

</script>
